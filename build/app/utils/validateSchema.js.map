{"version":3,"sources":["../../../src/app/utils/validateSchema.js"],"names":["validateSchema","body","schema","result","validate","abortEarly","valid","error","undefined","fields","details","reduce","obj","message","context","key","ValidationException","value"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,cAAc,GAAG,CAACC,IAAD,EAAOC,MAAP,KAAkB;AACvC,QAAMC,MAAM,GAAGD,MAAM,CAACE,QAAP,CAAgBH,IAAhB,EAAsB;AAAEI,IAAAA,UAAU,EAAE;AAAd,GAAtB,CAAf;AACA,QAAMC,KAAK,GAAGH,MAAM,CAACI,KAAP,KAAiBC,SAA/B;;AACA,MAAI,CAACF,KAAL,EAAY;AACV,UAAMG,MAAM,GAAGN,MAAM,CAACI,KAAP,CAAaG,OAAb,CAAqBC,MAArB,CACb,CAACC,GAAD,EAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA;AAAX,KAAN,MAAgC,EAC9B,GAAGF,GAD2B;AAE9B,OAACE,OAAO,CAACC,GAAT,GAAeF;AAFe,KAAhC,CADa,EAKb,EALa,CAAf;AAOA,UAAM,IAAIG,4BAAJ,CAAwBP,MAAxB,CAAN;AACD;;AACD,SAAON,MAAM,CAACc,KAAd;AACD,CAdD;;eAgBejB,c","sourcesContent":["import ValidationException from '../exceptions/ValidationException';\n\nconst validateSchema = (body, schema) => {\n  const result = schema.validate(body, { abortEarly: false });\n  const valid = result.error === undefined;\n  if (!valid) {\n    const fields = result.error.details.reduce(\n      (obj, { message, context }) => ({\n        ...obj,\n        [context.key]: message,\n      }),\n      {}\n    );\n    throw new ValidationException(fields);\n  }\n  return result.value;\n};\n\nexport default validateSchema;\n"],"file":"validateSchema.js"}